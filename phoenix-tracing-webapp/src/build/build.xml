<?xml version="1.0" encoding="UTF-8"?>
  <project name="trace-webapp-demo" default="war" basedir=".">

    <property name="project-name" value="${ant.project.name}" />
    <property name="builder" value="ayola" />

    <property name="war-file-name" value="${project-name}.war" />
    <property name="webapp-directory" value="src/main/webapp" />
    <property name="classes-directory" value="src/main/webapp" />
    <property name="web-directory" value="webapp" />
    <property name="web-xml-file" value="src/main/webapp/WEB-INF/web.xml" />
    <tstamp prefix="build-info">
      <format property="current-date" pattern="d-MMMM-yyyy" locale="en" />
      <format property="current-time" pattern="hh:mm:ss a z" locale="en" />
    </tstamp>
    <property name="build-directory" value="build" />

    <target name="war" depends="">

      <mkdir dir="${build-directory}" />


      <delete file="${build-directory}/${war-file-name}" />
      <war warfile="${build-directory}/${war-file-name}" webxml="${web-xml-file}">
        <fileset dir="${build-directory}" includes="${web-directory}" />
        <zipfileset dir="${build-directory}" includes="**/*.*" prefix="${web-directory}" />
        <zipfileset dir="${build-directory}" includes="**/*.*" prefix="${web-directory}" />
        <manifest>
          <attribute name="Built-By" value="${builder}" />
          <attribute name="Built-On" value="${build-info.current-date}" />
          <attribute name="Built-At" value="${build-info.current-time}" />
        </manifest>
        <zipfileset dir="${webapp-directory}" prefix="${web-directory}">
          <exclude name="package.json" />
          <exclude name="**/WEB-INF/**" />
        </zipfileset>
      </war>
    </target>

  </project>